// JSON data structure for movies
const dados = {
    "filmes": [
        {
            "id": 1,
            "titulo": "O Labirinto do Fauno",
            "descricao": "Na Espanha de 1944, a jovem Ofélia e sua mãe doente chegam ao posto do novo marido de sua mãe, um sádico oficial do exército que está tentando reprimir uma guerrilha.",
            "conteudo": "Na Espanha de 1944, após a Guerra Civil Espanhola, a jovem e imaginativa Ofélia viaja com sua mãe grávida Carmen para conhecer seu novo padrasto, o cruel capitão Vidal. Enquanto explora um antigo labirinto, Ofélia encontra um misterioso fauno que lhe revela ser ela a reencarnação de uma princesa do Reino Subterrâneo. Para provar sua identidade real e atingir a imortalidade, ela deve completar três perigosas tarefas. Enquanto o mundo fantástico e o mundo real se entrelaçam, Ofélia enfrenta tanto os horrores da guerra quanto as criaturas místicas que encontra. Dirigido por Guillermo del Toro, o filme mistura fantasia sombria e drama histórico, criando uma poderosa alegoria sobre inocência e resistência em tempos de opressão.",
            "categoria": "Fantasia/Drama",
            "diretor": "Guillermo del Toro",
            "destaque": true,
            "ano": "2006",
            "duracao": "118 min",
            "classificacao": "16",
            "imagem_principal": "img/labirinto_fauno.png",
            "imagens_complementares": [
                {
                    "id": 1,
                    "src": "img/labirinto_fauno1.png",
                    "descricao": "Ofélia encontra o Fauno"
                },
                {
                    "id": 2,
                    "src": "img/labirinto_fauno2.png",
                    "descricao": "O Homem Pálido"
                },
                {
                    "id": 3,
                    "src": "img/labirinto_fauno3.png",
                    "descricao": "Capitão Vidal"
                }
            ]
        },
        {
            "id": 2,
            "titulo": "Tudo em Todo Lugar ao Mesmo Tempo",
            "descricao": "Uma imigrante chinesa se envolve em uma aventura insana onde só ela pode salvar o mundo explorando outros universos.",
            "conteudo": "Evelyn Wang é uma imigrante chinesa sobrecarregada que luta para administrar sua lavanderia, lidar com uma auditoria fiscal e salvar seu casamento com Waymond, enquanto se esforça para se conectar com sua filha Joy. Sua vida vira de cabeça para baixo quando ela descobre que é capaz de acessar memórias e habilidades de inúmeras versões de si mesma em universos paralelos. Quando uma entidade maligna ameaça destruir o multiverso, Evelyn precisa canalizar seus novos poderes para salvar sua família e o mundo. À medida que viaja pelo multiverso, ela redescobre o significado do amor e aprende a valorizar as pequenas alegrias da vida cotidiana. O filme mistura ação, comédia e drama em uma narrativa não-linear que explora temas de família, imigração, identidade e propósito.",
            "categoria": "Ficção Científica/Comédia",
            "diretor": "Dan Kwan, Daniel Scheinert",
            "destaque": true,
            "ano": "2022",
            "duracao": "139 min",
            "classificacao": "16",
            "imagem_principal": "img/everything_everywhere.png",
            "imagens_complementares": [
                {
                    "id": 1,
                    "src": "img/everything_everywhere1.png",
                    "descricao": "Evelyn no multiverso"
                },
                {
                    "id": 2,
                    "src": "img/everything_everywhere2.png",
                    "descricao": "Cena de luta com Jobu Tupaki"
                }
            ]
        },
        {
            "id": 3,
            "titulo": "Interestelar",
            "descricao": "Um grupo de exploradores utiliza um recém-descoberto buraco de minhoca para superar as limitações de viagem espacial humana.",
            "conteudo": "Em um futuro próximo, a Terra está se tornando inabitável devido a uma praga que destrói plantações e causa tempestades de poeira. Cooper, um ex-piloto da NASA que agora trabalha como fazendeiro, descobre coordenadas misteriosas que o levam a uma instalação secreta da NASA. Lá, ele é recrutado pelo Professor Brand para pilotar a nave Endurance através de um buraco de minhoca perto de Saturno, em busca de planetas potencialmente habitáveis em outra galáxia. A missão é a última esperança da humanidade, mas Cooper precisa deixar seus filhos para trás. À medida que a tripulação explora planetas hostis e enfrenta dilemas científicos e filosóficos, eles descobrem que o tempo passa de forma diferente próximo a um buraco negro massivo. Cooper luta para voltar para casa e cumprir a promessa feita à sua filha, enquanto a humanidade enfrenta sua possível extinção. O filme explora conceitos de relatividade, viagem espacial, amor transcendendo dimensões e o que significa ser humano diante do cosmos infinito.",
            "categoria": "Ficção Científica/Aventura",
            "diretor": "Christopher Nolan",
            "destaque": true,
            "ano": "2014",
            "duracao": "169 min",
            "classificacao": "10",
            "imagem_principal": "img/interstellar.png",
            "imagens_complementares": [
                {
                    "id": 1,
                    "src": "img/interstellar1.png",
                    "descricao": "Nave espacial Endurance"
                },
                {
                    "id": 2,
                    "src": "img/interstellar2.png",
                    "descricao": "Planeta oceano"
                },
                {
                    "id": 3,
                    "src": "img/interstellar3.png",
                    "descricao": "Buraco negro Gargantua"
                }
            ]
        },
        {
            "id": 4,
            "titulo": "Parasita",
            "descricao": "Uma família pobre engana seu caminho para trabalhar na casa de uma família rica, com consequências inesperadas.",
            "conteudo": "Em Seul, Coreia do Sul, a família Kim vive em um pequeno porão semissubterrâneo, lutando para sobreviver com empregos mal pagos. Quando o filho Ki-woo consegue um emprego como tutor de inglês para a filha da rica família Park, ele vê uma oportunidade. Gradualmente, ele ajuda toda sua família a se infiltrar na casa dos Park, assumindo diferentes funções - sem revelar que são parentes. O que começa como um esquema para garantir empregos estáveis logo se transforma em algo mais complexo quando segredos são revelados e as desigualdades sociais se tornam impossíveis de ignorar. O filme oferece uma crítica social afiada sobre desigualdade de classes, apresentando contrastes visuais marcantes entre a opulência dos Parks e a precariedade do mundo dos Kims. Quando uma tempestade desencadeia uma série de eventos imprevisíveis, as tensões escalam até um clímax chocante que questiona se as barreiras sociais podem verdadeiramente ser superadas.",
            "categoria": "Drama/Thriller",
            "diretor": "Bong Joon-ho",
            "destaque": false,
            "ano": "2019",
            "duracao": "132 min",
            "classificacao": "16",
            "imagem_principal": "img/parasite.png",
            "imagens_complementares": [
                {
                    "id": 1,
                    "src": "img/parasite1.png",
                    "descricao": "Família Kim no porão"
                },
                {
                    "id": 2,
                    "src": "img/parasite2.png",
                    "descricao": "Família Park na mansão"
                }
            ]
        },
        {
            "id": 5,
            "titulo": "Duna",
            "descricao": "Paul Atreides, um jovem brilhante com um destino além de sua compreensão, deve viajar para o planeta mais perigoso do universo para garantir o futuro de sua família e seu povo.",
            "conteudo": "No ano 10191, o Imperador atribui à nobre Casa Atreides o controle do desértico planeta Arrakis, fonte da especiaria mais valiosa do universo, anteriormente controlado pelos brutais Harkonnen. Duke Leto Atreides se muda para Arrakis com sua concubina Lady Jessica, seu filho Paul e conselheiros de confiança, sabendo que provavelmente é uma armadilha política. Paul, herdeiro da Casa Atreides, começa a ter visões do futuro enquanto aprende sobre os nativos Fremen e os gigantescos vermes da areia que dominam o deserto. Quando a Casa Atreides é traída e atacada, Paul e Jessica precisam fugir para o deserto e buscar refúgio com os Fremen. No processo, Paul descobre sua conexão com uma antiga profecia e começa a questionar seu papel em um conflito que pode determinar o destino do universo conhecido. O filme adapta aproximadamente metade do primeiro livro da série Duna de Frank Herbert, explorando temas de política, religião, ecologia e o perigo do carisma messiânico.",
            "categoria": "Ficção Científica/Aventura",
            "diretor": "Denis Villeneuve",
            "destaque": false,
            "ano": "2021",
            "duracao": "155 min",
            "classificacao": "14",
            "imagem_principal": "img/dune.png",
            "imagens_complementares": [
                {
                    "id": 1,
                    "src": "img/dune1.png",
                    "descricao": "Paul Atreides no deserto"
                },
                {
                    "id": 2,
                    "src": "img/dune2.png",
                    "descricao": "Verme da areia"
                },
                {
                    "id": 3,
                    "src": "img/dune3.png",
                    "descricao": "Casa Atreides chegando a Arrakis"
                }
            ]
        },
        {
            "id": 6,
            "titulo": "Oppenheimer",
            "descricao": "A história do físico americano J. Robert Oppenheimer e seu papel no desenvolvimento da bomba atômica.",
            "conteudo": "Oppenheimer traça a vida complexa e controversa de J. Robert Oppenheimer, o físico teórico que liderou os esforços para desenvolver a primeira bomba atômica como diretor do Projeto Manhattan durante a Segunda Guerra Mundial. Com uma narrativa não-linear que alterna entre duas linhas temporais - uma colorida seguindo o desenvolvimento da bomba e outra em preto e branco documentando a audiência de segurança de Oppenheimer nos anos 50 - o filme explora as motivações, conflitos morais e consequências pessoais enfrentadas por Oppenheimer. Enquanto ele reúne os maiores cientistas do mundo para criar uma arma de poder sem precedentes, Oppenheimer luta com as implicações éticas de seu trabalho, culminando no teste Trinity bem-sucedido e nos bombardeios de Hiroshima e Nagasaki. Após a guerra, ele se torna uma figura controversa, enfrentando acusações de simpatias comunistas em meio à crescente paranoia da Guerra Fria, enquanto também lida com seu legado como 'pai da bomba atômica'. O filme examina como uma das mentes mais brilhantes do século XX mudou o curso da história humana e enfrentou o peso dessa responsabilidade.",
            "categoria": "Drama/Biografia",
            "diretor": "Christopher Nolan",
            "destaque": true,
            "ano": "2023",
            "duracao": "180 min",
            "classificacao": "16",
            "imagem_principal": "img/oppenheimer.png",
            "imagens_complementares": [
                {
                    "id": 1,
                    "src": "img/oppenheimer1.png",
                    "descricao": "J. Robert Oppenheimer"
                },
                {
                    "id": 2,
                    "src": "img/oppenheimer2.png",
                    "descricao": "Teste Trinity"
                }
            ]
        }
    ]
};

// Function to get URL parameters
function getUrlParameter(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    var results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
}

// Function to load home page content
function loadHomePage() {
    loadFeaturedMovies();
    loadAllMovies();
    loadFooterInfo();
}

// Function to load featured movies in carousel
function loadFeaturedMovies() {
    const featuredMoviesContainer = document.querySelector('#featured-carousel .carousel-inner');
    const featuredMovies = dados.filmes.filter(filme => filme.destaque);
    
    featuredMovies.forEach((filme, index) => {
        const carouselItem = document.createElement('div');
        carouselItem.className = `carousel-item ${index === 0 ? 'active' : ''}`;
        
        carouselItem.innerHTML = `
            <div class="featured-movie">
                <img src="${filme.imagem_principal}" class="d-block w-100" alt="${filme.titulo}">
                <div class="carousel-caption d-none d-md-block">
                    <h2>${filme.titulo}</h2>
                    <p>${filme.descricao}</p>
                    <a href="detalhes.html?id=${filme.id}" class="btn btn-primary">Saiba mais</a>
                </div>
            </div>
        `;
        
        featuredMoviesContainer.appendChild(carouselItem);
    });
}

// Function to load all movies in cards
function loadAllMovies() {
    const moviesContainer = document.querySelector('#all-movies .row');
    
    dados.filmes.forEach(filme => {
        const card = document.createElement('div');
        card.className = 'col-md-4 col-sm-6 mb-4';
        
        card.innerHTML = `
            <div class="card h-100">
                <img src="${filme.imagem_principal}" class="card-img-top" alt="${filme.titulo}">
                <div class="card-body">
                    <h5 class="card-title">${filme.titulo}</h5>
                    <p class="card-text">${filme.descricao}</p>
                    <p class="card-info">
                        <span class="badge bg-secondary">${filme.categoria}</span>
                        <span class="badge bg-info">${filme.ano}</span>
                    </p>
                    <a href="detalhes.html?id=${filme.id}" class="btn btn-primary">Ver detalhes</a>
                </div>
            </div>
        `;
        
        moviesContainer.appendChild(card);
    });
}

// Function to load footer information
function loadFooterInfo() {
    const footerContainer = document.querySelector('#footer-info');
    
    footerContainer.innerHTML = `
        <div class="container py-4">
            <div class="row">
                <div class="col-md-6">
                    <h4>Sobre o Desenvolvedor</h4>
                    <p>Este site foi desenvolvido como parte do trabalho prático da disciplina de Desenvolvimento Web.</p>
                    <p>© 2025 - Catálogo de Filmes</p>
                </div>
                <div class="col-md-6">
                    <h4>Contato</h4>
                    <p>Email: estudante@universidade.edu</p>
                    <p>GitHub: github.com/estudante</p>
                </div>
            </div>
        </div>
    `;
}

// Function to load movie details page
function loadMovieDetails() {
    const id = parseInt(getUrlParameter('id'));
    
    if (!id) {
        window.location.href = 'index.html';
        return;
    }
    
    const filme = dados.filmes.find(filme => filme.id === id);
    
    if (!filme) {
        document.querySelector('#movie-details').innerHTML = `
            <div class="alert alert-danger">Filme não encontrado!</div>
        `;
        return;
    }
    
    // Load movie info
    const movieInfoContainer = document.querySelector('#movie-info');
    movieInfoContainer.innerHTML = `
        <div class="row">
            <div class="col-md-4">
                <img src="${filme.imagem_principal}" class="img-fluid rounded" alt="${filme.titulo}">
            </div>
            <div class="col-md-8">
                <h1>${filme.titulo}</h1>
                <div class="badges mb-3">
                    <span class="badge bg-primary">${filme.categoria}</span>
                    <span class="badge bg-secondary">${filme.ano}</span>
                    <span class="badge bg-info">${filme.duracao}</span>
                    <span class="badge bg-warning">Classificação: ${filme.classificacao}</span>
                </div>
                <p class="lead">${filme.descricao}</p>
                <div class="movie-details mt-4">
                    <p><strong>Diretor:</strong> ${filme.diretor}</p>
                    <div class="movie-synopsis">
                        <h4>Sinopse</h4>
                        <p>${filme.conteudo}</p>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    // Load movie images
    const movieImagesContainer = document.querySelector('#movie-images .row');
    filme.imagens_complementares.forEach(imagem => {
        const imageCol = document.createElement('div');
        imageCol.className = 'col-md-4 col-sm-6 mb-4';
        
        imageCol.innerHTML = `
            <div class="card h-100">
                <img src="${imagem.src}" class="card-img-top" alt="${imagem.descricao}">
                <div class="card-body">
                    <p class="card-text">${imagem.descricao}</p>
                </div>
            </div>
        `;
        
        movieImagesContainer.appendChild(imageCol);
    });
}